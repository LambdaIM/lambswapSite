{"version":3,"sources":["webpack:///./src/views/earn/rewardMine/index.vue?2fbb","webpack:///./src/views/earn/rewardMine/index.vue?8263","webpack:///src/views/earn/rewardMine/index.vue","webpack:///./src/views/earn/rewardMine/index.vue?4ca6","webpack:///./src/views/earn/rewardMine/index.vue?f539"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","liquidityData","staticRenderFns","data","designatedData","showLoading","components","singeMineList","multiMineList","mlambPool","loading","airDrop","methods","computed","isReady","ethChainID","ethersprovider","isConnect","ethAddress","watch","value","getListData","created","mounted","component"],"mappings":"kHAAA,W,oECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAAEN,EAAe,YAAEI,EAAG,MAAM,CAACA,EAAG,YAAY,GAAG,CAACA,EAAG,aAAaA,EAAG,gBAAgB,CAACG,MAAM,CAAC,KAAOP,EAAIQ,mBAAmB,IACjQC,EAAkB,G,6LCsBtB,GACEC,KADF,WAEI,MAAO,CACLC,eAAgB,GAChBH,cAAe,GACfI,aAAa,IAGjBC,WAAY,CACVC,cAAe,WAAnB,wDACIC,cAAe,WAAnB,wDACIC,UAAW,WAAf,wDACIC,QAAS,WAAb,yDACIC,QAAS,WAAb,8FAEEC,QAAS,CACP,YADJ,WACA,6KACA,iBADA,kBAGA,2DAHA,cAGA,EAHA,gBAIA,8CAJA,cAIA,EAJA,OAMA,kDAEA,KACA,EATA,yDASA,wGACA,IADA,YACA,YADA,wBAEA,OAFA,SAGA,oBAHA,OAGA,EAHA,OAIA,wCACA,GADA,IAEA,oBACA,cACA,YACA,eATA,OACA,IADA,2DATA,+DAsBA,IAtBA,QAwBA,kBAxBA,8EA8BA,iBA9BA,gFAiCI,aAlCJ,SAkCA,sLAEA,KACA,cACA,cACA,gCACA,gCAEA,6BACA,GACA,4CACA,4CACA,4CACA,2CAEA,YAIA,GACA,iCACA,iCACA,0BAEA,gCACA,kFAEA,kFAEA,0CACA,gDACA,gDACA,wBACA,4CAEA,2CAnCA,kBAoCA,GApCA,gDAuCEC,SAAU,OAAZ,OAAY,CAAZ,kBACA,8FADA,IAEIC,QAFJ,WAGM,OAAOpB,KAAKqB,YAAcrB,KAAKsB,gBAEjCC,UALJ,WAMM,OAAOvB,KAAKwB,cAGhBC,MAAO,CACLL,QADJ,SACA,GACUM,GACF1B,KAAK2B,eAGTJ,UANJ,SAMA,GACUG,GACF1B,KAAK2B,gBAIXC,QA7GF,WA8GQ5B,KAAKoB,SACPpB,KAAK2B,eAGTE,QAlHF,WAkHA,WACI,EAAJ,iCACM,EAAN,mBC3I6W,I,wBCQzWC,EAAY,eACd,EACAhC,EACAU,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E","file":"js/chunk-7a652acb.8ab37d60.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=282d5c72&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rewardMine-wrapper\"},[(_vm.showLoading)?_c('div',[_c('loading')],1):[_c('mlambPool'),_c('multiMineList',{attrs:{\"data\":_vm.liquidityData}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"rewardMine-wrapper\">\n    <div v-if=\"showLoading\">\n      <loading />\n    </div>\n    <template v-else>\n      <!-- <airDrop /> -->\n\n      <mlambPool />\n      <!-- <singeMineList :data=\"designatedData\" /> -->\n      <multiMineList :data=\"liquidityData\" />\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { StakingRewardListbatch } from '../utils/helpUtils/mineUtilFunc.js';\nimport event from '@/common/js/event';\nimport { pairListEarn } from '@/contactLogic/readpairpool.js';\nimport { getTokenImg } from '@/contactLogic/readbalance.js';\nimport Web3 from 'web3';\nimport _ from 'underscore';\nexport default {\n  data() {\n    return {\n      designatedData: [],\n      liquidityData: [],\n      showLoading: false,\n    };\n  },\n  components: {\n    singeMineList: () => import('./components/singleMineList.vue'),\n    multiMineList: () => import('./components/multiMineList.vue'),\n    mlambPool: () => import('./components/mLAMBPool.vue'),\n    loading: () => import('@/components/basic/loading.vue'),\n    airDrop: () => import('@/components/airDrop.vue'),\n  },\n  methods: {\n    async getListData() {\n      this.showLoading = true;\n      try {\n        const data = await StakingRewardListbatch(this.ethersprovider, this.ethAddress, this.ethChainID);\n        const pairListPrice = await pairListEarn(this.ethChainID, this.ethersprovider);\n        console.log({ data });\n        const tempLiquidity = data.filter((item) => item.kind === 'multi');\n        // console.log({tempLiquidity});\n        const result = [];\n        const results = async () => {\n          for (let index = 0; index < tempLiquidity.length; index++) {\n            const item = tempLiquidity[index];\n            const res = await this.getPriceData(item, pairListPrice);\n            result.push({\n              ...item,\n              poolValue: res.usdtNum,\n              price: res.price,\n              img1: res.img1,\n              img2: res.img2,\n            });\n          }\n        };\n        await results();\n        console.log({ result });\n        this.liquidityData = result;\n\n        // this.designatedData = data.filter((item) => item.kind === 'single');\n      } catch (error) {\n        console.log(error);\n      } finally {\n        this.showLoading = false;\n      }\n    },\n    async getPriceData(item, pairListPrice) {\n      // console.log('getPriceData');\n      const obj = {};\n      const tokensymbolA = item.symbol[0];\n      const tokensymbolB = item.symbol[1];\n      const pledgeBalance = item && item.data && item.data.totalSupply;\n      const pledgeBalanceWei = Web3.utils.toWei(pledgeBalance.toString());\n      // 匹配读取价格信息\n      const pairPriceItem = _.find(pairListPrice, (pairItem) => {\n        if (\n          (pairItem.pairInfo.tokenAmounts[0].token.symbol == tokensymbolA &&\n            pairItem.pairInfo.tokenAmounts[1].token.symbol == tokensymbolB) ||\n          (pairItem.pairInfo.tokenAmounts[1].token.symbol == tokensymbolA &&\n            pairItem.pairInfo.tokenAmounts[0].token.symbol == tokensymbolB)\n        ) {\n          return pairItem;\n        }\n      });\n      // 构造价格相关信息\n      const data = {\n        aTokenbalance: pairPriceItem.aTokenbalance(pledgeBalanceWei),\n        bTokenbalance: pairPriceItem.bTokenbalance(pledgeBalanceWei),\n        price: pairPriceItem.price(tokensymbolA, tokensymbolB).price,\n      };\n      if (data.aTokenbalance.token.symbol == tokensymbolA) {\n        obj.usdtNum = data.aTokenbalance.multiply(data.price).add(data.bTokenbalance).toSignificant(6);\n      } else {\n        obj.usdtNum = data.bTokenbalance.multiply(data.price).add(data.aTokenbalance).toSignificant(6);\n      }\n      obj.price = data.price && data.price.toSignificant(6);\n      obj.img1 = getTokenImg(item.symbol[0], this.ethChainID);\n      obj.img2 = getTokenImg(item.symbol[1], this.ethChainID);\n      if (tokensymbolA === 'GOAT' && tokensymbolB === 'LAMB') {\n        this.$store.commit('changeScashPrice', obj.price);\n      }\n      this.$store.commit('changeEarnPrice', obj.price);\n      return obj;\n    },\n  },\n  computed: {\n    ...mapState(['ethersprovider', 'ethChainID', 'ethAddress', 'web3', 'earnPrice', 'scashPrice']),\n    isReady() {\n      return this.ethChainID && this.ethersprovider;\n    },\n    isConnect() {\n      return this.ethAddress;\n    },\n  },\n  watch: {\n    isReady(value) {\n      if (value) {\n        this.getListData();\n      }\n    },\n    isConnect(value) {\n      if (value) {\n        this.getListData();\n      }\n    },\n  },\n  created() {\n    if (this.isReady) {\n      this.getListData();\n    }\n  },\n  mounted() {\n    event.$on('txsuccess', () => {\n      this.getListData();\n    });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import './media/media.less';\n.rewardMine-wrapper {\n  position: relative;\n  width: 100%;\n  // min-height: 700px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=282d5c72&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=282d5c72&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"282d5c72\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}