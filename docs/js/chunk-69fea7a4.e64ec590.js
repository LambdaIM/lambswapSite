(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69fea7a4"],{"0cb2":function(e,t,n){var a=n("7b0b"),s=Math.floor,i="".replace,r=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,u,p,l){var c=n+e.length,d=u.length,m=o;return void 0!==p&&(p=a(p),m=r),i.call(l,m,(function(a,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":r=p[i.slice(1,-1)];break;default:var o=+i;if(0===o)return a;if(o>d){var l=s(o/10);return 0===l?a:l<=d?void 0===u[l-1]?i.charAt(1):u[l-1]+i.charAt(1):a}r=u[o-1]}return void 0===r?"":r}))}},"1d92":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("1da1"),s=(n("96cf"),n("d3b7"),n("25f0"),n("9d56")),i=n("6df3"),r=n("adae"),o=n("a004");function u(e,t,n,a){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a,u){var p,l,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(p=a instanceof i["TokenAmount"]?a.token:void 0,l=Object(o["i"])(n,t,p.address),p){e.next=5;break}return e.abrupt("return");case 5:if(l){e.next=8;break}return e.abrupt("return");case 8:if(a){e.next=11;break}return e.abrupt("return");case 11:if(u){e.next=14;break}return e.abrupt("return");case 14:return c=!1,e.next=17,l.estimateGas.approve(u,s["a"]).catch((function(){return c=!0,l.estimateGas.approve(u,a.raw.toString())}));case 17:return d=e.sent,e.abrupt("return",new Promise((function(e,t){l.approve(u,c?a.raw.toString():s["a"],{gasLimit:Object(r["b"])(d)}).then((function(t){e({summary:"Approve "+a.currency.symbol,approval:{tokenAddress:p.address,spender:u},hash:t.hash,response:t})})).catch((function(e){t(e)}))})));case 19:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},"27ae":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pledge-dialog"},[n("Modal",{attrs:{"class-name":"pledge-modal",transfer:!1,"footer-hide":!0,closable:!0},model:{value:e.openPledgeDialog,callback:function(t){e.openPledgeDialog=t},expression:"openPledgeDialog"}},[n("div",{staticClass:"pledge-content"},[n("p",{staticClass:"title text-center"},[e._v(" 存入 mLAMB ")]),n("div",{staticClass:"pledge-wrapper"},[n("div",{staticClass:"title-content"},[n("span",{staticClass:"card-title"},[e._v(e._s(e.$t("earn.dialog.stakeDialog.amount")))]),n("div",{staticClass:"balance-item"},[n("span",{staticClass:"mr-2 text-secondary"},[e._v("mLAMB "+e._s(e.$t("earn.dialog.stakeDialog.balance")))]),n("span",[e._v(e._s(e.mLAMBBalance))])])]),n("div",{staticClass:"pledge-wrapper flex"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.pledgeAmount,expression:"pledgeAmount",modifiers:{number:!0}}],staticClass:"amount-input",attrs:{type:"number",pattern:"[0-9]*.?[0-9]{0,6}"},domProps:{value:e.pledgeAmount},on:{keyup:e.checkApprove,input:[function(t){t.target.composing||(e.pledgeAmount=e._n(t.target.value))},e.handleInput],blur:function(t){return e.$forceUpdate()}}})]),n("div",{staticClass:"percentage"},[n("div",{on:{click:function(t){return e.percentage(.25)}}},[e._v(" 25% ")]),n("div",{on:{click:function(t){return e.percentage(.5)}}},[e._v(" 50% ")]),n("div",{on:{click:function(t){return e.percentage(.75)}}},[e._v(" 75% ")]),n("div",{on:{click:function(t){return e.percentage(1)}}},[e._v(" "+e._s(e.$t("earn.dialog.stakeDialog.max"))+" ")])])]),n("div",{staticClass:"price-wrapper"},[n("div",{staticClass:"price-item"},[n("span",[e._v(e._s(e.$t("earn.dialog.stakeDialog.willStake")))]),n("p",[e._v(e._s(e.pledgeAmount||0)+" mLAMB")])])]),n("div",{staticClass:"btn-wrapper"},[e.needApprove?[e.approveLoading?n("Buttons",[e._v(" "+e._s(e.$t("earn.dialog.loading"))+" ")]):n("Buttons",{nativeOn:{click:function(t){return e.approveTx(t)}}},[e._v(" 授权 ")])]:e._e(),e.needApprove?e._e():[!1===e.sendLoading?n("Buttons",{nativeOn:{click:function(t){return e.depositMLAMB(t)}}},[e._v(" "+e._s(e.$t("earn.dialog.stakeDialog.confirm"))+" ")]):n("Buttons",[e._v(" "+e._s(e.$t("earn.dialog.loading"))+" ")])]],2)])])],1)},s=[],i=n("3835"),r=n("1da1"),o=n("5530"),u=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("25f0"),n("99af"),n("4de4"),n("b0c0"),n("5319"),n("ac1f"),n("2f62")),p=n("b012"),l=n("6df3"),c=n("fb7b"),d=n("1d92"),m=n("fe74"),f=n("c26c"),y=n("99e5"),b=n.n(y),v=n("db84"),h=n("5bed"),g=n("901e");g.config({DECIMAL_PLACES:6,ROUNDING_MODE:g.ROUND_DOWN});var w={components:{Buttons:function(){return n.e("chunk-2d225272").then(n.bind(null,"e2d3"))}},data:function(){return{openPledgeDialog:!1,pledgeAmount:"",data:{},sendLoading:!1,mLAMBBalance:0,needApprove:!1,tokenObj:{},approveLoading:!1}},computed:Object(o["a"])({},Object(u["b"])(["ethersprovider","ethAddress","ethChainID","web3"])),methods:{depositMLAMB:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,s,i,r,o,u,p,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkData()){t.next=2;break}return t.abrupt("return",!1);case 2:return e.sendLoading=!0,t.prev=3,n=e.ethersprovider,a=e.ethAddress,s=e.ethChainID,i=e.data&&e.data.address,r=e.data&&e.data.decimals,o=e.data&&e.data.symbol,u=new l["Token"](s,i,r,o),p=b.a.utils.toWei(e.pledgeAmount.toString(),"ether"),t.next=14,Object(v["c"])(n,a,u,p);case 14:c=t.sent,c.hash&&(h["a"].$emit("sendSuccess"),h["a"].$emit("sendtx",[c,{okinfo:"存入 ".concat(e.pledgeAmount," mLAMB ").concat(e.$t("notice.n42")),failinfo:"存入 ".concat(e.pledgeAmount," mLAMB ").concat(e.$t("notice.n43"))}])),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](3);case 21:return t.prev=21,e.openPledgeDialog=!1,e.sendLoading=!1,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[3,18,21,25]])})))()},open:function(e){this.data={},this.data=e,this.pledgeAmount="",this.getMlambBalance(),this.openPledgeDialog=!0},getMlambBalance:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,s,r,o,u,p,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=m.tokens.filter((function(t){return"mLAMB"===t.name&&t.chainId===e.ethChainID})),a=Object(i["a"])(n,1),s=a[0],r=s.address,o=f,u=new e.web3.eth.Contract(o,r),t.prev=4,t.next=7,u.methods.balanceOf(e.ethAddress).call();case 7:p=t.sent,l=new g(p).div("1e18").decimalPlaces(6).toNumber(),isNaN(l)&&(l=0),e.mLAMBBalance=l,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))()},checkApprove:Object(p["debounce"])(Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.ethChainID,n=this.data&&this.data.data.rewardTokenAddress,a=this.data&&this.data.decimals,s=this.data&&this.data.symbol,i=new l["Token"](t,n,a,s),r=this.pledgeAmount.toString(),o=new l["TokenAmount"](i,b.a.utils.toWei(r,"ether")),this.tokenObj.dataAddress=this.data&&this.data.address,this.tokenObj.amountToApprove=o,e.next=12,Object(c["b"])(this.ethAddress,this.ethersprovider,o,this.tokenObj.dataAddress);case 12:this.needApprove=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),800),approveTx:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkData()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,e.approveLoading=!0,t.next=6,Object(d["a"])(e.ethAddress,e.ethersprovider,e.tokenObj.amountToApprove,e.tokenObj.dataAddress);case 6:if(n=t.sent,!n){t.next=12;break}return t.next=10,n.response.wait([1]);case 10:a=t.sent,a&&(e.needApprove=!1,e.approveLoading=!1);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),e.approveLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[2,14]])})))()},percentage:function(e){var t=new g(this.mLAMBBalance),n=new g(e);this.pledgeAmount=t.multipliedBy(n).decimalPlaces(6).toNumber()},handleInput:function(e){var t=e.target.value.toString();this.pledgeAmount=t.replace(/\D*(\d*)(\.?)(\d{0,6})\d*/,"$1$2$3")},checkData:function(){var e=this.mLAMBBalance,t=new g(e),n=new g(this.pledgeAmount);return""===this.pledgeAmount?(this.$Notice.warning({title:this.$t("notice.n"),desc:this.$t("notice.n30")}),!1):parseFloat(this.pledgeAmount)<=0?(this.$Notice.warning({title:this.$t("notice.n"),desc:this.$t("notice.n31")}),!1):!n.isGreaterThan(t)||(this.$Notice.warning({title:this.$t("notice.n"),desc:this.$t("notice.n29")}),!1)}},watch:{pledgeAmount:function(){this.checkApprove()}}},k=w,A=(n("9e5b"),n("2877")),x=Object(A["a"])(k,a,s,!1,null,"4f88a2c8",null);t["default"]=x.exports},5319:function(e,t,n){"use strict";var a=n("d784"),s=n("825a"),i=n("50c4"),r=n("a691"),o=n("1d80"),u=n("8aa5"),p=n("0cb2"),l=n("14c3"),c=Math.max,d=Math.min,m=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var f=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=a.REPLACE_KEEPS_$0,b=f?"$":"$0";return[function(n,a){var s=o(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,s,a):t.call(String(s),n,a)},function(e,a){if(!f&&y||"string"===typeof a&&-1===a.indexOf(b)){var o=n(t,e,this,a);if(o.done)return o.value}var v=s(e),h=String(this),g="function"===typeof a;g||(a=String(a));var w=v.global;if(w){var k=v.unicode;v.lastIndex=0}var A=[];while(1){var x=l(v,h);if(null===x)break;if(A.push(x),!w)break;var _=String(x[0]);""===_&&(v.lastIndex=u(h,i(v.lastIndex),k))}for(var M="",O=0,$=0;$<A.length;$++){x=A[$];for(var B=String(x[0]),L=c(d(r(x.index),h.length),0),D=[],C=1;C<x.length;C++)D.push(m(x[C]));var j=x.groups;if(g){var R=[B].concat(D,L,h);void 0!==j&&R.push(j);var S=String(a.apply(void 0,R))}else S=p(B,h,L,D,j,a);L>=O&&(M+=h.slice(O,L)+S,O=L+B.length)}return M+h.slice(O)}]}))},"9e5b":function(e,t,n){"use strict";n("ef63")},c26c:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"mintingFinished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_token","type":"address"}],"name":"reclaimToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"unpause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_amount","type":"uint256"}],"name":"mint","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"value","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"claimOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"paused","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_subtractedValue","type":"uint256"}],"name":"decreaseApproval","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"},{"name":"_remarks","type":"bytes32"}],"name":"transferRemarks","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"finishMinting","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"pause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_addedValue","type":"uint256"}],"name":"increaseApproval","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"},{"name":"_remarks","type":"bytes32"}],"name":"userBurnRemarks","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"pendingOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"lambdaaddress","type":"bytes32"}],"name":"TransferRemarks","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"lambdaaddress","type":"bytes32"}],"name":"BurnRemarks","type":"event"},{"anonymous":false,"inputs":[],"name":"Pause","type":"event"},{"anonymous":false,"inputs":[],"name":"Unpause","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"burner","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[],"name":"MintFinished","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"}],"name":"OwnershipRenounced","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},ef63:function(e,t,n){}}]);
//# sourceMappingURL=chunk-69fea7a4.e64ec590.js.map